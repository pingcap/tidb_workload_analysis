Alias: q4
Query: 
SELECT * FROM token_transfers WHERE from_address = '0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98' ORDER BY block_number DESC LIMIT 5

Original Cost: 1.39E+08
Optimized Cost: 6.04E+03
Cost Reduction Ratio: 0.00


===================== original plan =====================
TopN_8                      5.00          139080914.74     root                                  ethereum.token_transfers.block_number:desc, offset:0, count:5                              
└─TableReader_16            5.00          139080104.42     root                                  data:TopN_15                                                                               
  └─TopN_15                 5.00          2086196992.56    cop[tikv]                             ethereum.token_transfers.block_number:desc, offset:0, count:5                              
    └─Selection_14          313670.00     2049853634.20    cop[tikv]                             eq(ethereum.token_transfers.from_address, "0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98")    
      └─TableFullScan_13    5397104.00    1780538144.60    cop[tikv]    table:token_transfers    keep order:false                                                                           

===================== optimized plan =====================
Projection_25                   5.00    6037.52    root                                                                                                                                ethereum.token_transfers.token_address, ethereum.token_transfers.from_address, ethereum.token_transfers.to_address, ethereum.token_transfers.value, ethereum.token_transfers.transaction_hash, ethereum.token_transfers.log_index, ethereum.token_transfers.block_number    
└─IndexLookUp_24                5.00    6034.03    root                                                                                                                                limit embedded(offset:0, count:5)                                                                                                                                                                                                                                           
  ├─Limit_23(Build)             5.00    2649.63    cop[tikv]                                                                                                                           offset:0, count:5                                                                                                                                                                                                                                                           
  │ └─IndexRangeScan_21         6.25    2649.63    cop[tikv]    table:token_transfers, index:idx_from_address_block_number_token_address(from_address, block_number, token_address)    range:["0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98","0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98"], keep order:true, desc                                                                                                                                                    
  └─TableRowIDScan_22(Probe)    5.00    1607.83    cop[tikv]    table:token_transfers                                                                                                  keep order:false                                                                                                                                                                                                                                                            
  
  
 
 
 


mysql> explain analyze SELECT * FROM token_transfers WHERE from_address = '0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98' ORDER BY block_number DESC LIMIT 5;
+------------------------------+-----------+---------+-----------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+---------+------+
| id                           | estRows   | actRows | task      | access object         | execution info                                                                                                                                                                                                                                                                                                                                             | operator info                                                                           | memory  | disk |
+------------------------------+-----------+---------+-----------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+---------+------+
| TopN_8                       | 5.00      | 5       | root      |                       | time:190.5ms, loops:2, RU:4033.745774                                                                                                                                                                                                                                                                                                                      | ethereum.token_transfers.block_number:desc, offset:0, count:5                           | 2.21 KB | N/A  |
| └─TableReader_16             | 5.00      | 35      | root      |                       | time:190.4ms, loops:3, cop_task: {num: 7, max: 190.4ms, min: 145.2ms, avg: 168.9ms, p95: 190.4ms, max_proc_keys: 130504, p95_proc_keys: 130504, tot_proc: 1.18s, tot_wait: 672.7µs, rpc_num: 7, rpc_time: 1.18s, copr_cache_hit_ratio: 0.00, build_task_duration: 16.9µs, max_distsql_concurrency: 7}                                                      | data:TopN_15                                                                            | 3.16 KB | N/A  |
|   └─TopN_15                  | 5.00      | 35      | cop[tikv] |                       | tikv_task:{proc max:190ms, min:144ms, avg: 167.9ms, p80:188ms, p95:190ms, iters:878, tasks:7}, scan_detail: {total_process_keys: 895725, total_process_keys_size: 238434431, total_keys: 895732, get_snapshot_time: 555.5µs, rocksdb: {key_skipped_count: 895725, block: {cache_hit_count: 14, read_count: 7698, read_byte: 70.9 MB, read_time: 20.8ms}}}  | ethereum.token_transfers.block_number:desc, offset:0, count:5                           | N/A     | N/A  |
|     └─Selection_14           | 50808.00  | 51747   | cop[tikv] |                       | tikv_task:{proc max:190ms, min:143ms, avg: 166.1ms, p80:185ms, p95:190ms, iters:878, tasks:7}                                                                                                                                                                                                                                                              | eq(ethereum.token_transfers.from_address, "0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98") | N/A     | N/A  |
|       └─TableFullScan_13     | 895725.00 | 895725  | cop[tikv] | table:token_transfers | tikv_task:{proc max:179ms, min:137ms, avg: 155.4ms, p80:172ms, p95:179ms, iters:878, tasks:7}                                                                                                                                                                                                                                                              | keep order:false                                                                        | N/A     | N/A  |
+------------------------------+-----------+---------+-----------+-----------------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------+---------+------+
5 rows in set (0.20 sec)








mysql> 
mysql> explain analyze SELECT * FROM token_transfers WHERE from_address = '0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98' ORDER BY block_number DESC LIMIT 5;
+----------------------------------+---------+---------+-----------+---------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------+------+
| id                               | estRows | actRows | task      | access object                                                                                                       | execution info                                                                                                                                                                                                                                                                                                                                                                                                                                                             | operator info                                                                                                                                                                                                                                                            | memory   | disk |
+----------------------------------+---------+---------+-----------+---------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------+------+
| Projection_25                    | 5.00    | 5       | root      |                                                                                                                     | time:1.91ms, loops:2, RU:1.091192, Concurrency:OFF                                                                                                                                                                                                                                                                                                                                                                                                                         | ethereum.token_transfers.token_address, ethereum.token_transfers.from_address, ethereum.token_transfers.to_address, ethereum.token_transfers.value, ethereum.token_transfers.transaction_hash, ethereum.token_transfers.log_index, ethereum.token_transfers.block_number | 71.8 KB  | N/A  |
| └─IndexLookUp_24                 | 5.00    | 5       | root      |                                                                                                                     | time:1.9ms, loops:2, index_task: {total_time: 975.9µs, fetch_handle: 970.5µs, build: 2.85µs, wait: 2.57µs}, table_task: {total_time: 775.9µs, num: 1, concurrency: 5}, next: {wait_index: 1.1ms, wait_table_lookup_build: 108.4µs, wait_table_lookup_resp: 668.5µs}                                                                                                                                                                                                        | limit embedded(offset:0, count:5)                                                                                                                                                                                                                                        | 127.9 KB | N/A  |
|   ├─Limit_23(Build)              | 5.00    | 5       | cop[tikv] |                                                                                                                     | time:963.1µs, loops:1, cop_task: {num: 1, max: 896.6µs, proc_keys: 5, tot_proc: 186.3µs, tot_wait: 170.3µs, rpc_num: 1, rpc_time: 861.8µs, copr_cache_hit_ratio: 0.00, build_task_duration: 37µs, max_distsql_concurrency: 1}, tikv_task:{time:0s, loops:1}, scan_detail: {total_process_keys: 5, total_process_keys_size: 1375, total_keys: 6, get_snapshot_time: 126.9µs, rocksdb: {key_skipped_count: 6, block: {cache_hit_count: 5}}}                                  | offset:0, count:5                                                                                                                                                                                                                                                        | N/A      | N/A  |
|   │ └─IndexRangeScan_21          | 5.00    | 5       | cop[tikv] | table:token_transfers, index:idx_from_address_block_number_token_address(from_address, block_number, token_address) | tikv_task:{time:0s, loops:1}                                                                                                                                                                                                                                                                                                                                                                                                                                               | range:["0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98","0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98"], keep order:true, desc                                                                                                                                                 | N/A      | N/A  |
|   └─TableRowIDScan_22(Probe)     | 5.00    | 5       | cop[tikv] | table:token_transfers                                                                                               | time:647.5µs, loops:2, cop_task: {num: 1, max: 577.6µs, proc_keys: 5, tot_proc: 112.8µs, tot_wait: 95.6µs, rpc_num: 1, rpc_time: 557.3µs, copr_cache_hit_ratio: 0.00, build_task_duration: 41.2µs, max_distsql_concurrency: 1, max_extra_concurrency: 1}, tikv_task:{time:0s, loops:1}, scan_detail: {total_process_keys: 5, total_process_keys_size: 1344, total_keys: 6, get_snapshot_time: 70.4µs, rocksdb: {key_skipped_count: 2, block: {cache_hit_count: 7}}}        | keep order:false                                                                                                                                                                                                                                                         | N/A      | N/A  |
+----------------------------------+---------+---------+-----------+---------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------+------+
5 rows in set (0.00 sec)

mysql> explain analyze SELECT * FROM token_transfers WHERE from_address = '0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98' ORDER BY block_number DESC LIMIT 5;
+----------------------------------+---------+---------+-----------+---------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------+------+
| id                               | estRows | actRows | task      | access object                                                                                                       | execution info                                                                                                                                                                                                                                                                                                                                                                                                                                                             | operator info                                                                                                                                                                                                                                                            | memory   | disk |
+----------------------------------+---------+---------+-----------+---------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------+------+
| Projection_25                    | 5.00    | 5       | root      |                                                                                                                     | time:1.73ms, loops:2, RU:1.095295, Concurrency:OFF                                                                                                                                                                                                                                                                                                                                                                                                                         | ethereum.token_transfers.token_address, ethereum.token_transfers.from_address, ethereum.token_transfers.to_address, ethereum.token_transfers.value, ethereum.token_transfers.transaction_hash, ethereum.token_transfers.log_index, ethereum.token_transfers.block_number | 77.2 KB  | N/A  |
| └─IndexLookUp_24                 | 5.00    | 5       | root      |                                                                                                                     | time:1.72ms, loops:2, index_task: {total_time: 733.6µs, fetch_handle: 726.5µs, build: 4.57µs, wait: 2.53µs}, table_task: {total_time: 858.7µs, num: 1, concurrency: 5}, next: {wait_index: 826.3µs, wait_table_lookup_build: 100.5µs, wait_table_lookup_resp: 755.1µs}                                                                                                                                                                                                     | limit embedded(offset:0, count:5)                                                                                                                                                                                                                                        | 108.1 KB | N/A  |
|   ├─Limit_23(Build)              | 5.00    | 5       | cop[tikv] |                                                                                                                     | time:718.8µs, loops:1, cop_task: {num: 1, max: 649.5µs, proc_keys: 5, tot_proc: 142.7µs, tot_wait: 75.1µs, rpc_num: 1, rpc_time: 621µs, copr_cache_hit_ratio: 0.00, build_task_duration: 30.8µs, max_distsql_concurrency: 1}, tikv_task:{time:0s, loops:1}, scan_detail: {total_process_keys: 5, total_process_keys_size: 1375, total_keys: 6, get_snapshot_time: 33.5µs, rocksdb: {key_skipped_count: 6, block: {cache_hit_count: 5}}}                                    | offset:0, count:5                                                                                                                                                                                                                                                        | N/A      | N/A  |
|   │ └─IndexRangeScan_21          | 5.00    | 5       | cop[tikv] | table:token_transfers, index:idx_from_address_block_number_token_address(from_address, block_number, token_address) | tikv_task:{time:0s, loops:1}                                                                                                                                                                                                                                                                                                                                                                                                                                               | range:["0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98","0xfbb1b73c4f0bda4f67dca266ce6ef42f520fbb98"], keep order:true, desc                                                                                                                                                 | N/A      | N/A  |
|   └─TableRowIDScan_22(Probe)     | 5.00    | 5       | cop[tikv] | table:token_transfers                                                                                               | time:737.6µs, loops:2, cop_task: {num: 1, max: 675.3µs, proc_keys: 5, tot_proc: 168.8µs, tot_wait: 82.7µs, rpc_num: 1, rpc_time: 661.8µs, copr_cache_hit_ratio: 0.00, build_task_duration: 33.6µs, max_distsql_concurrency: 1, max_extra_concurrency: 1}, tikv_task:{time:0s, loops:1}, scan_detail: {total_process_keys: 5, total_process_keys_size: 1344, total_keys: 6, get_snapshot_time: 39.6µs, rocksdb: {key_skipped_count: 2, block: {cache_hit_count: 7}}}        | keep order:false                                                                                                                                                                                                                                                         | N/A      | N/A  |
+----------------------------------+---------+---------+-----------+---------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------+------+
5 rows in set (0.00 sec)
