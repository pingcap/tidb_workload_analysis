Alias: q2
Query: 
Select * from transactions where to_address in ('0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24',
'0x34662f274a42a17876926bc7b0ba541535e40e5f',
'0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c')

Original Cost: 6.72E+08
Optimized Cost: 1.44E+08
Cost Reduction Ratio: 0.21


===================== original plan =====================
TableReader_7          10.95          671609537.72      root                               data:Selection_6                                                                                                                                                                  
└─Selection_6          10.95          10074120145.20    cop[tikv]                          in(ethereum.transactions.to_address, "0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24", "0x34662f274a42a17876926bc7b0ba541535e40e5f", "0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c")    
  └─TableFullScan_5    23996584.00    8876690603.60     cop[tikv]    table:transactions    keep order:false                                                                                                                                                                  

===================== optimized plan =====================
IndexLookUp_10               71989.75    144300570.24    root                                                                                                                                                                                                                                                                                                                                                                                                                                
├─IndexRangeScan_8(Build)    71989.75    20417737.08     cop[tikv]    table:transactions, index:idx_to_address_block_timestamp_value(to_address, block_timestamp, value)    range:["0x34662f274a42a17876926bc7b0ba541535e40e5f","0x34662f274a42a17876926bc7b0ba541535e40e5f"], ["0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24","0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24"], ["0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c","0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c"], keep order:false    
└─TableRowIDScan_9(Probe)    71989.75    26630071.81     cop[tikv]    table:transactions                                                                                    keep order:false                                                                                                                                                                                                                                                                                                 







mysql> explain analyze Select * from transactions where to_address in ('0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24', '0x34662f274a42a17876926bc7b0ba541535e40e5f', '0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c');
+-------------------------+------------+---------+-----------+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
| id                      | estRows    | actRows | task      | access object      | execution info                                                                                                                                                                                                                                                                                                                         | operator info                                                                                                                                                                  | memory  | disk |
+-------------------------+------------+---------+-----------+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
| TableReader_7           | 9.14       | 13      | root      |                    | time:256.7ms, loops:2, RU:11776.828736, cop_task: {num: 71, max: 213.2ms, min: 183.9µs, avg: 38.6ms, p95: 143.8ms, max_proc_keys: 81748, p95_proc_keys: 79504, tot_proc: 2.71s, tot_wait: 2.43ms, rpc_num: 71, rpc_time: 2.74s, copr_cache_hit_ratio: 0.70, build_task_duration: 111.1µs, max_distsql_concurrency: 15}                 | data:Selection_6                                                                                                                                                               | 6.66 KB | N/A  |
| └─Selection_6           | 9.14       | 13      | cop[tikv] |                    | tikv_task:{proc max:212ms, min:98ms, avg: 129.9ms, p80:148ms, p95:178ms, iters:5587, tasks:71}, scan_detail: {total_process_keys: 1585815, total_process_keys_size: 710384849, total_keys: 1585836, get_snapshot_time: 934.1µs, rocksdb: {delete_skipped_count: 402465, key_skipped_count: 3574074, block: {cache_hit_count: 24046}}}  | in(ethereum.transactions.to_address, "0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24", "0x34662f274a42a17876926bc7b0ba541535e40e5f", "0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c") | N/A     | N/A  |
|   └─TableFullScan_5     | 5395060.00 | 5395060 | cop[tikv] | table:transactions | tikv_task:{proc max:195ms, min:88ms, avg: 119.4ms, p80:137ms, p95:165ms, iters:5587, tasks:71}                                                                                                                                                                                                                                         | keep order:false                                                                                                                                                               | N/A     | N/A  |
+-------------------------+------------+---------+-----------+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
3 rows in set (0.26 sec)

mysql> explain analyze Select * from transactions where to_address in ('0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24', '0x34662f274a42a17876926bc7b0ba541535e40e5f', '0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c');
+-------------------------+------------+---------+-----------+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
| id                      | estRows    | actRows | task      | access object      | execution info                                                                                                                                                                                                                                                                                                                         | operator info                                                                                                                                                                  | memory  | disk |
+-------------------------+------------+---------+-----------+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
| TableReader_7           | 9.14       | 13      | root      |                    | time:250.3ms, loops:2, RU:11813.571073, cop_task: {num: 71, max: 195.3ms, min: 178.1µs, avg: 40.2ms, p95: 173.8ms, max_proc_keys: 81748, p95_proc_keys: 79504, tot_proc: 2.82s, tot_wait: 2.43ms, rpc_num: 71, rpc_time: 2.85s, copr_cache_hit_ratio: 0.70, build_task_duration: 158.7µs, max_distsql_concurrency: 15}                 | data:Selection_6                                                                                                                                                               | 2.72 KB | N/A  |
| └─Selection_6           | 9.14       | 13      | cop[tikv] |                    | tikv_task:{proc max:194ms, min:93ms, avg: 131.4ms, p80:162ms, p95:175ms, iters:5587, tasks:71}, scan_detail: {total_process_keys: 1585815, total_process_keys_size: 710384849, total_keys: 1585836, get_snapshot_time: 898.7µs, rocksdb: {delete_skipped_count: 402465, key_skipped_count: 3574074, block: {cache_hit_count: 24046}}}  | in(ethereum.transactions.to_address, "0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24", "0x34662f274a42a17876926bc7b0ba541535e40e5f", "0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c") | N/A     | N/A  |
|   └─TableFullScan_5     | 5395060.00 | 5395060 | cop[tikv] | table:transactions | tikv_task:{proc max:186ms, min:84ms, avg: 120.8ms, p80:146ms, p95:162ms, iters:5587, tasks:71}                                                                                                                                                                                                                                         | keep order:false                                                                                                                                                               | N/A     | N/A  |
+-------------------------+------------+---------+-----------+--------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
3 rows in set (0.25 sec)









mysql> explain analyze Select * from transactions where to_address in ('0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24',
    -> '0x34662f274a42a17876926bc7b0ba541535e40e5f',
    -> '0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c');
+-------------------------------+---------+---------+-----------+----------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
| id                            | estRows | actRows | task      | access object                                                                                      | execution info                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | operator info                                                                                                                                                                                                                                                                                                 | memory  | disk |
+-------------------------------+---------+---------+-----------+----------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
| IndexLookUp_10                | 9.20    | 13      | root      |                                                                                                    | time:2.73ms, loops:2, RU:2.247834, index_task: {total_time: 1.01ms, fetch_handle: 1.01ms, build: 1.27µs, wait: 1.14µs}, table_task: {total_time: 1.58ms, num: 1, concurrency: 5}, next: {wait_index: 1.15ms, wait_table_lookup_build: 91.6µs, wait_table_lookup_resp: 1.46ms}                                                                                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                               | 18.6 KB | N/A  |
| ├─IndexRangeScan_8(Build)     | 9.20    | 13      | cop[tikv] | table:transactions, index:idx_to_address_block_timestamp_value(to_address, block_timestamp, value) | time:999.7µs, loops:3, cop_task: {num: 2, max: 913.1µs, min: 864.2µs, avg: 888.6µs, p95: 913.1µs, max_proc_keys: 11, p95_proc_keys: 11, tot_proc: 572.2µs, tot_wait: 367.2µs, rpc_num: 2, rpc_time: 1.73ms, copr_cache_hit_ratio: 0.00, build_task_duration: 30.1µs, max_distsql_concurrency: 2}, tikv_task:{proc max:0s, min:0s, avg: 0s, p80:0s, p95:0s, iters:2, tasks:2}, scan_detail: {total_process_keys: 13, total_process_keys_size: 2808, total_keys: 16, get_snapshot_time: 284.1µs, rocksdb: {key_skipped_count: 13, block: {cache_hit_count: 8, read_count: 5, read_byte: 36.7 KB, read_time: 33.5µs}}}                             | range:["0x34662f274a42a17876926bc7b0ba541535e40e5f","0x34662f274a42a17876926bc7b0ba541535e40e5f"], ["0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24","0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24"], ["0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c","0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c"], keep order:false | N/A     | N/A  |
| └─TableRowIDScan_9(Probe)     | 9.20    | 13      | cop[tikv] | table:transactions                                                                                 | time:1.44ms, loops:2, cop_task: {num: 9, max: 684.9µs, min: 0s, avg: 145.1µs, p95: 684.9µs, max_proc_keys: 4, p95_proc_keys: 4, tot_proc: 1.04ms, tot_wait: 1.11ms, rpc_num: 2, rpc_time: 1.28ms, copr_cache_hit_ratio: 0.00, build_task_duration: 58.3µs, max_distsql_concurrency: 1, max_extra_concurrency: 1, store_batch_num: 7}, tikv_task:{proc max:1ms, min:0s, avg: 111.1µs, p80:0s, p95:1ms, iters:9, tasks:9}, scan_detail: {total_process_keys: 13, total_process_keys_size: 4447, total_keys: 13, get_snapshot_time: 971.1µs, rocksdb: {block: {cache_hit_count: 56, read_count: 4, read_byte: 4.40 KB, read_time: 7.66µs}}}        | keep order:false                                                                                                                                                                                                                                                                                              | N/A     | N/A  |
+-------------------------------+---------+---------+-----------+----------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
3 rows in set (0.00 sec)

mysql> explain analyze Select * from transactions where to_address in ('0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24', '0x34662f274a42a17876926bc7b0ba541535e40e5f', '0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c');
+-------------------------------+---------+---------+-----------+----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
| id                            | estRows | actRows | task      | access object                                                                                      | execution info                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | operator info                                                                                                                                                                                                                                                                                                 | memory  | disk |
+-------------------------------+---------+---------+-----------+----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
| IndexLookUp_10                | 9.20    | 13      | root      |                                                                                                    | time:2.23ms, loops:2, RU:2.117429, index_task: {total_time: 686.8µs, fetch_handle: 684.7µs, build: 920ns, wait: 1.15µs}, table_task: {total_time: 1.41ms, num: 1, concurrency: 5}, next: {wait_index: 795.6µs, wait_table_lookup_build: 116µs, wait_table_lookup_resp: 1.29ms}                                                                                                                                                                                                                                                                                                   |                                                                                                                                                                                                                                                                                                               | 18.6 KB | N/A  |
| ├─IndexRangeScan_8(Build)     | 9.20    | 13      | cop[tikv] | table:transactions, index:idx_to_address_block_timestamp_value(to_address, block_timestamp, value) | time:678.5µs, loops:3, cop_task: {num: 2, max: 598.2µs, min: 557.9µs, avg: 578.1µs, p95: 598.2µs, max_proc_keys: 11, p95_proc_keys: 11, tot_proc: 260.3µs, tot_wait: 131.7µs, rpc_num: 2, rpc_time: 1.11ms, copr_cache_hit_ratio: 0.00, build_task_duration: 29.2µs, max_distsql_concurrency: 2}, tikv_task:{proc max:0s, min:0s, avg: 0s, p80:0s, p95:0s, iters:2, tasks:2}, scan_detail: {total_process_keys: 13, total_process_keys_size: 2808, total_keys: 16, get_snapshot_time: 50.8µs, rocksdb: {key_skipped_count: 13, block: {cache_hit_count: 9}}}                     | range:["0x34662f274a42a17876926bc7b0ba541535e40e5f","0x34662f274a42a17876926bc7b0ba541535e40e5f"], ["0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24","0x70f0f4f40fed33420c1e4ceefa1eb482e044ba24"], ["0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c","0x7259c2a51a9b1f7e373dcd00898d26a44ffc2e7c"], keep order:false | N/A     | N/A  |
| └─TableRowIDScan_9(Probe)     | 9.20    | 13      | cop[tikv] | table:transactions                                                                                 | time:1.27ms, loops:2, cop_task: {num: 9, max: 580.7µs, min: 0s, avg: 127µs, p95: 580.7µs, max_proc_keys: 4, p95_proc_keys: 4, tot_proc: 723.6µs, tot_wait: 398.1µs, rpc_num: 2, rpc_time: 1.12ms, copr_cache_hit_ratio: 0.00, build_task_duration: 61µs, max_distsql_concurrency: 1, max_extra_concurrency: 1, store_batch_num: 7}, tikv_task:{proc max:0s, min:0s, avg: 0s, p80:0s, p95:0s, iters:9, tasks:9}, scan_detail: {total_process_keys: 13, total_process_keys_size: 4447, total_keys: 13, get_snapshot_time: 151.5µs, rocksdb: {block: {cache_hit_count: 54}}}        | keep order:false                                                                                                                                                                                                                                                                                              | N/A     | N/A  |
+-------------------------------+---------+---------+-----------+----------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+---------+------+
3 rows in set (0.00 sec)
